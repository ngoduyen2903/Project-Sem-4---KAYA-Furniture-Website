<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>       
        <style>
            body {
                background: #BA68C8;
            }

            .form-control:focus {
                box-shadow: none;
                border-color: #BA68C8;
            }

            .profile-button {
                background: #BA68C8;
                box-shadow: none;
                border: none;
            }

            .profile-button:hover {
                background: #682773;
            }

            .profile-button:focus {
                background: #682773;
                box-shadow: none;
            }

            .profile-button:active {
                background: #682773;
                box-shadow: none;
            }

            .back:hover {
                color: #682773;
                cursor: pointer;
            }
        </style>
    </h:head>
    <h:body>
        <ui:composition template="/layouts/clientLayouts.xhtml">
            <ui:define name="content">  
                <h:form prependId="false" enctype="multipart/form-data">
                    <f:metadata>
                        <f:event type="preRenderView" listener="#{loginMB.checkCustomer()}"></f:event>
                    </f:metadata>

                    <section class="breadcrumb breadcrumb_bg">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <div class="breadcrumb_iner">
                                        <div class="breadcrumb_iner_item">
                                            <h2>My Profile</h2>
                                            <p>Home <span>-</span>My Profile</p>
                                        </div>
                                    </div>
                                </div>                            
                            </div>
                        </div>
                    </section>

                    <div class="container rounded bg-white mt-5">
                        <div class="row">
                            <div class="col-md-4 border-right">
                                <div class="d-flex flex-column align-items-center text-center p-3 py-5">
                                    <h:graphicImage url="#{customerMB.customers.avatar}" class="rounded-circle img-fluid" width="250px" />
                                    <span class="font-weight-bold">#{customerMB.customers.fullname}</span>
                                    <span class="text-black-50">#{customerMB.customers.email}</span>
                                    <span>#{customerMB.customers.address}</span>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="p-3 py-5">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div class="d-flex flex-row align-items-center back"><i class="fa fa-long-arrow-left mr-1 mb-1"></i>
                                            <h3>Edit Profile</h3>
                                        </div>
                                    </div>
                                    <div class="row mt-2">
                                        <h:inputHidden value="#{customerMB.customers.customerID}"/>
                                        <div class="col-md-6">
                                            <h:inputText styleClass="form-control" value="#{customerMB.customers.fullname}" id="name" required = "true" requiredMessage="This field cannot be empty!"/>
                                            <h:message for = "name" id="name_m" style = "color: red;" />  
                                        </div>
                                        <div class="col-md-6">
                                            <h:inputText readonly="true" styleClass="form-control" value="#{customerMB.customers.username}" id="username" required = "true" requiredMessage="This field cannot be empty!"/>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <h:inputText styleClass="form-control" value="#{customerMB.customers.password}" id="pass" required = "true" requiredMessage="This field cannot be empty!"/>
                                            <h:message for = "pass" id="pass_m" style = "color: red;" />   
                                        </div>

                                        <div class="col-md-6">
                                            <h:inputText styleClass="form-control" value="#{customerMB.customers.phoneNumber}" id="phone" required = "true" requiredMessage="This field cannot be empty!"/>
                                            <h:message for = "phone" id="phone_m" style = "color: red;" /> 
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <h:inputText styleClass="form-control" value="#{customerMB.customers.address}" id="address" required = "true" requiredMessage="This field cannot be empty!"/>
                                            <h:message for = "address" id="address_m" style = "color: red;" /> 
                                        </div>
                                        <div class="col-md-6">
                                            <h:inputText styleClass="form-control" value="#{customerMB.customers.email}" id="email" required = "true" requiredMessage="This field cannot be empty!"/>
                                            <h:message for = "email" id="email_m" style = "color: red;" />
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <h:inputFile id="file" styleClass="form-control" class="inputfile" value="#{customerMB.file}"/> <br/><br/>
                                            <label for="file"> 
                                                <h:graphicImage url="#{resource['/asset/photo-camera-gray.svg']}" id="image" height="150" width="150" />
                                            </label>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <h:commandButton class="btn profile-button btn_3" type="submit" action="#{customerMB.upProfileCustomer()}" value="Save">
                                            <f:ajax execute="@form" render="name_m phone_m address_m email_m pass_m"/>
                                        </h:commandButton>  &nbsp;&nbsp;
                                        <h:link class="btn profile-button btn_3" outcome="/client/index.xhtml">Back</h:link>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </h:form>
            </ui:define>
        </ui:composition>      
    </h:body>
</html>

